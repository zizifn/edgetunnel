# Edge Tunnel ï¼ˆæ­£åœ¨å¼€å‘ï¼‰

ä¸€ä¸ªæ— æ¯”ç®€å•å®‰å…¨ï¼ŒåŸºäºŽ edge çš„ tunnel ã€‚

**v2ray-heroku ç”±äºŽ heroku å–æ¶ˆå…è´¹ï¼Œé¡¹ç›®å·²ç»æ­»äº†ã€‚

> é¡¹ç›®æ­£åœ¨å¼€å‘ï¼ŒåŸºæœ¬å¯ç”¨ï¼Œä¼šæœ‰ bugã€‚ã€‚
> **è¯·å®šæœŸæŒ‰ç…§ github çš„æç¤ºï¼ŒåªåŒæ­¥åˆ°è‡ªå·±çš„é¡¹ç›®ã€‚åªéœ€è¦åœ¨ä¹Žä¸‹å›¾çº¢æ¡†çš„æç¤ºï¼Œå…¶ä»–æç¤ºä¸è¦ç‚¹å‡»**ã€‚
> ![sync](./doc/sync.jpg)

> æœ¬é¡¹ç›®çº¯å±žæŠ€æœ¯æ€§éªŒè¯ï¼ŒæŽ¢ç´¢æœ€æ–°çš„ web standardã€‚ä¸ç»™äºˆä»»ä½•ä¿è¯ã€‚è¯·å¤§å®¶é…Œæƒ…ä½¿ç”¨ã€‚å¦‚æžœæœ‰å…´è¶£æƒ³ä¸€èµ·è¿›è¡ŒæŠ€æœ¯æŽ¢è®¨å¯ä»¥è”ç³»æˆ‘ã€‚ðŸ’•

## Edge Tunnel server --- Deno deploy

Edge tunnel çš„æœåŠ¡ä½¿ç”¨äº† [Deno deploy](https://deno.com/deploy).

### é£Žé™©æç¤º

`Deno deploy` é‡‡ç”¨ [fair use policy](https://deno.com/deploy/docs/fair-use-policy), ç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯`çœ‹è‰¯å¿ƒä½¿ç”¨`ã€‚ è¿åå¯èƒ½ä¼šå°å·ã€‚
æŒ‰ç…§æˆ‘çš„ç†è§£ï¼Œæœ¬é¡¹ç›®åº”è¯¥æ˜¯è¿å fair use policyã€‚è¯·å¤§å®¶**é…Œæƒ…ä½¿ç”¨**ã€‚

> è¿™é‡Œååˆ†æ„Ÿè°¢ Deno deploy ä¸¥è‚ƒå¯¹å¾… web standardï¼Œ æ”¯æŒ HTTP request & response streamingï¼Œè®© edge tunnel æˆä¸ºå¯èƒ½ã€‚

> è¿™é‡Œæ²¡æœ‰ä½¿ç”¨ deno websocketï¼Œå…¶å®žæŠ€æœ¯ä¸Šå¯ä»¥æŠŠ v2ray ç§»æ¤è¿‡æ¥ã€‚ä½†æ˜¯æˆ‘æš‚æ—¶æ²¡æœ‰çœ‹æ˜Žç™½ VLESS åè®®å†…å®¹.

## Edge Tunnel server --- Cloudflare Worker ï¼ˆæ•¬è¯·æœŸå¾…ï¼‰

è¿™ä¸ªéœ€è¦ç­‰ Cloudflare å‘å¸ƒä¸‹é¢çš„æŠ€æœ¯ã€‚
https://blog.cloudflare.com/introducing-socket-workers/

### å¦‚ä½•éƒ¨ç½²æœåŠ¡

è¯·æŸ¥çœ‹ä¸‹é¢æ•™ç¨‹ã€‚

[Deno deploy Install](./doc/edge-tunnel-deno.md)

## Edge Tunnel å®¢æˆ·ç«¯

> ç”±äºŽçœ‹ä¸æ‡‚ VLESS åè®®å†…å®¹, æ‰€ä»¥æ— æ³•ä½¿ç”¨å¸¸ç”¨çš„å®¢æˆ·ç«¯è½¯ä»¶.

### å®‰è£…

è¯·è½¬åˆ°æœ¬é¡¹ç›® [releases](https://github.com/zizifn/edgetunnel/releases),é€‰æ‹©æ­£ç¡®çš„å¹³å°ï¼Œä¸‹è½½æœ€æ–°å®¢æˆ·ç«¯.

é¡¹ç›®ä½¿ç”¨https://github.com/vercel/pkg, æ‰€ä»¥æ”¯æŒä¸‹é¢å¹³å°.

1. **platform** alpine, linux, linuxstatic, win, macos, (freebsd)
2. **arch** x64, arm64, (armv6, armv7)

## å¯åŠ¨

è§£åŽ‹å¹¶ä¸”ä¿®æ”¹å®‰è£…æ–‡ä»¶çš„ `config.json` æ–‡ä»¶.

```json
{
  "port": "1081", // æœ¬åœ° HTTP ä»£ç†çš„ç«¯å£
  "address": "https://****.deno.dev/", // deno deploy URL
  "uuid": "****" // ä½  deno deploy è®¾ç½®çš„ç”¨æˆ·
}
```

ç„¶åŽ,åœ¨è§£åŽ‹ç›®å½•ä¸‹ï¼Œæ‰“å¼€å‘½ä»¤è¡Œ, è¾“å…¥ä¸‹é¢å‘½ä»¤.

> Edge Tunnel Client ä¼šåœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ª http ä»£ç†.

> å¦‚æžœ window ç³»ç»Ÿæç¤ºï¼Œæ˜¯å¦å…è®¸ç½‘ç»œæƒé™ï¼Œè¯·æŠŠæ‰€æœ‰å…è®¸ã€‚
> ![firewall](./doc/firewall.jpg)

```ps
.\edgetunnel-win-x64.exe run --config .\config.json
```

![client-log](./doc/client-log.jpg)

> è¯·ä¸è¦å…³é—­å…³é—­å‘½ä»¤è¡Œ. å¦‚æžœå…³é—­,ä»£ç†ä¼šè‡ªåŠ¨é€€å‡º.

### éªŒè¯ä»£ç†æ˜¯å¦æ­£å¸¸

å†æ¬¡å¼€å¯ä¸€ä¸ªæ–°çš„å‘½ä»¤è¡Œï¼Œæµ‹è¯• proxy æ˜¯å¦å¯åŠ¨æ­£å¸¸ã€‚ã€‚**æ³¨æ„è‡ªå·± proxy çš„ç«¯å£**ã€‚

```bash
curl -v https://www.google.com --proxy http://127.0.0.1:1081
```

å¦‚æžœæœ‰è¿”å›žç»“æžœï¼Œå¹¶ä¸” edge tunnel å‘½ä»¤è¡Œæœ‰æç¤ºï¼Œè¯´æ˜Žä¸€åˆ‡æˆåŠŸã€‚

```
proxy to www.google.com:443 and remote return 200
```

## é…ç½®ä»£ç†æœåŠ¡ ï¼ˆé‡è¦ï¼‰

> ä¸åƒ v2rayN å¯ä»¥åœ¨è‡ªåŠ¨é…ç½®ä»£ç†ï¼Œæœ¬å®¢æˆ·ç«¯ç›®å‰éœ€è¦æ‰‹åŠ¨é…ç½®ä»£ç†æ‰èƒ½å·¥ä½œã€‚ ä¸‹é¢ä¸‰ç§æ–¹å¼å¯ä¾›å‚è€ƒã€‚

### æµè§ˆå™¨ switchyomega è®¾ç½®

å…·ä½“å®‰è£…å’Œé…ç½®,è¯·æŸ¥çœ‹å®˜ç½‘.
https://proxy-switchyomega.com/proxy/

é™¤äº†ç«¯å£ï¼ˆportï¼‰å’Œä¸‹å›¾å¯èƒ½ä¸ä¸€æ ·ã€‚å…¶ä»–éƒ½åº”è¯¥æ˜¯ä¸€æ ·çš„ã€‚

> ç«¯å£æ˜¯ä½ åœ¨ config.json è‡ªå·±é…ç½®çš„

![switchyomega2](./doc/switchyomega2.jpg)

### ç³»ç»Ÿå…¨å±€ proxy é…ç½®

ä½ ä¹Ÿå¯ä»¥é…ç½® proxy åˆ°ç³»ç»Ÿçº§åˆ«ã€‚

### å…¶ä»–è½¯ä»¶ proxy è®¾ç½®

> ç”µæŠ¥å®¢æˆ·ç«¯ä¸€ç›´ä¸åœçš„å‘é€ HTTP è¯·æ±‚ï¼Œæ‰€ä»¥ä»£ç†ç”µæŠ¥å¯èƒ½ä¼šå¿«é€Ÿæ¶ˆè€—èµ„æºå’Œå…è´¹é¢åº¦ã€‚

> ä¸‹é¢ä»¥ç”µæŠ¥ä¸ºä¾‹ï¼Œå…¶ä»–è½¯ä»¶ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å…·ä½“æ–¹å¼è¯·ç”¨æœç´¢å¼•æ“Žã€‚

è·¯å¾„ï¼Œ setting--> Advance-->Conntction type--> Use Custom proxy
![tel](./doc/tel.jpg)
